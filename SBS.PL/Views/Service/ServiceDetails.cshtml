@using Azure.Core
@using Services_Booking_System.View_Models
@model ServiceDetailsViewModel
@{
    ViewBag.Title = "Service Details";
}


<div class="container-fluid mt-4">
    <h1>
        @Model.ServiceTitle
    </h1>
    <div class="row " style="height: 100vh; min-height:fit-content;">
        <!-- Filter Sidebar -->
        <div class="col-md-3">
            <div class="card">
                <div class="card-header">
                    <h5>Filter</h5>
                </div>
                <div class="card-body">
                    <!-- Date Filter -->
                    <div class="mb-4">
                        <label class="form-label">Date</label><br>
                        <button class="btn btn-outline-primary btn-sm mb-2">Today</button>
                        <button class="btn btn-outline-primary btn-sm mb-2">Within 3 Days</button>
                        <button class="btn btn-outline-primary btn-sm mb-2">Within a Week</button>
                        <button class="btn btn-outline-primary btn-sm">Choose Dates</button>
                    </div>

                    <!-- Time of Day Filter -->
                    <div class="mb-4">
                        <label class="form-label">Time of Day</label><br>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="morning">
                            <label class="form-check-label" for="morning">Morning (8am - 12pm)</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="afternoon">
                            <label class="form-check-label" for="afternoon">Afternoon (12pm - 5pm)</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="evening">
                            <label class="form-check-label" for="evening">Evening (5pm - 9:30pm)</label>
                        </div>
                    </div>

                    <!-- Price Filter -->
                    <div>
                        @using (Html.BeginForm("ServiceDetails", "Service", FormMethod.Get))
                        {
                            <div class="form-group">
                                <label for="minPrice">Min Price:</label>
                                <input type="number" name="minPrice" id="minPrice" class="form-control" value="@ViewBag.MinPrice " />
                            </div>

                            <div class="form-group">
                                <label for="maxPrice">Max Price:</label>
                                <input type="number" name="maxPrice" id="maxPrice" class="form-control" value="@ViewBag.MaxPrice" />
                            </div>
                            <button type="submit" class="btn btn-primary mt-2 w-100">Filter</button>
                        }
                    </div>
                </div>
            </div>
        </div>

        <!-- Service Providers List -->
        <div class="col-md-9">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h4>Service Providers</h4>
                <div>
                    @using (Html.BeginForm("ServiceDetails", "Service", FormMethod.Get))
                    {
                        <div class="form-group">
                            <label for="sort">Sort By:</label>
                            @Html.DropDownList("sortBy", (SelectList)ViewBag.SortItems, new { @class = "form-select form-select-sm", onchange = "this.form.submit();" })
                        </div>
                    }
                </div>
            </div>

            <!-- Service Provider 1 -->
            @foreach (var technician in Model.ServiceProviders)
            {
                <div class="card mb-3">
                    <div class="row g-0">
                        <div class="col-md-2">
                            <img src="@technician.TechnicianImageUrl" class="img-fluid rounded-start" alt="Provider Image">
                        </div>
                        <div class="col-md-8">
                            <div class="card-body">
                                <h5 class="card-title">@technician.TechnicianName</h5>
                                <p class="card-text">
                                    <small class="text-muted">@technician.TechnicianReview <i class="fa-solid fa-star" style="color: #FFD43B;"></i> (@technician.ReviewsNum reviews) - $@technician.TechnicianPrice/hr</small><br>
                                    @technician.TechnicianDescription
                                </p>
                                <h6><span class="fw-bold">Address: </span>@technician.TechnicianAddress</h6>
                            </div>
                        </div>
                        <div class="col-md-2 d-flex align-items-center justify-content-end">
                            <a class="btn btn-success w-75 h-100" asp-controller="Booking" asp-action="Book" asp-route-technicianId="@technician.Id">Select & Continue</a>
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
</div>


